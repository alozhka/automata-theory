# Грамматика программы языка MysticGameScript
## 1. Примеры кода
```
dayzint x; # инициализируется значением по умолчанию = 0

funkotron printInt(dayzint value)
{
    exodus(value);
}

maincraft()
{
    iffy (ready) {
        dayzint x = 5;
        printInt(x); # выведет 5
    }
    printInt(x); # выведет 0
}
```

```
iffy (ready) {
    dayzint x = 10;
    exodus(x); # выведет 10

    iffy (ready) {
        dayzint x = 100;
        exodus(x); # выведет 100
    }

    exodus(x); # выведет 10
}
```

## 2. Ключевые особенности и семантические правила языка
### 1. Структура программы 
1. Программа располагается в одном файле
2. Программа состоит из глобальных переменных, функций и точки входа `maincraft`, внутри которой находятся инструкции

### 2. Область действия 
1. Область действия объявленных переменных и констант ограничивается блоком кода, обёрнутым в фигурные скобки
2. Поддерживаются глобальные переменные и константы, объявленные до главной функции `maincraft`
3. Обращение к переменным и константам происходит изначально к текущей области видимости, затем к родительской, затем к глобальной
4. Функция ограничивается только своей и глобальной областью видимости (т.е. нет родительской области видимости)

### 3. Переменные и константы 
1. Поддерживаются неизменяемые константы 
2. Поддерживаются изменяемые переменные 
3. Для объявления константы перед её типом добавляется ключевое слово `monument`
4. Повторное объявление переменной или константы с тем же именем в рамках одной области видимости считается ошибкой

Если при объявлении не присвоили переменной или константе значение, она создаётся со значением по умолчанию
| Тип     | Значение по умолчанию |
| ------- | --------------------- |
| dayzint | 0                     |
| fallout | 0.0                   |
| strike  | ""                    |

### 4. Ввод/вывод 
Ввод и вывод организуется с помощью встроенных функций
raid(x) - для ввода
exodus(x) - для вывода
exodusln(x) - для вывода с переносом строки (\n)

### 5. Виды инструкций
Не любое выражение является инструкцией
#### Основные инструкции:
* Объявление переменной
* Объявление константы
* Присваивание
* Условная инструкция
* Цикл while
* Цикл for
* Вызов функции
* Вызов встроенной функции
* Возврат из функции
* Прерывание цикла

### 6. Разделитель инструкций
1. Разделителем инсрукций является символ `;` (точка с запятой)
2. Разделитель не используется в конце циклов, условий, объявления_функций

### 7. Вычисление выражений
При вычислении логических выражений используется стратегия Short-circuit evaluation, 
вычисление прекращается, как только результат выражения становится очевидным

## 3. Грамматика в виде EBNF

### Программа
```ebnf
программа = {глобальная_инструкция}, точка_входа;
точка_входа = "maincraft", "(", ")", блок_функции;

глобальная_инструкция = объявление_переменной | объявление_константы | объявление_функции;
инструкция_функции = объявление_переменной | объявление_константы | присваивание | условие 
              | цикл_while | цикл_for | вызов_функции | вызов_заложенной_функции | возврат;
инструкция = инструкция_функции | прерывание_цикла;

блок_функции = "{", {инструкция_функции}, "}";
блок = "{", {инструкция}, "}";
```

### Объявления переменной и константы
```ebnf
объявление_переменной = тип, идентификатор, ["=", выражение], ";";
объявление_константы = "monument", тип, идентификатор, ["=", выражение], ";";
```

### Управляющие конструкции
```ebnf
если = "iffy", "(", выражение, ")", блок;
иначе = "elysian", блок;
условие = если, [иначе];

прерывание_цикла = "breakout", ";" | "contra", ";";
цикл_while = "valorant", "(", выражение, ")", блок;
цикл_for = "forza", "(", (объявление_переменной | присваивание), ";", выражение, ";", присваивание, ")", блок;
```

### Функции
```ebnf
параметр = тип, идентификатор;
список_параметров = параметр, {",", параметр};
возврат = "returnal", [выражение], ";";
объявление_функции = "funkotron", идентификатор, "(", [список_параметров], ")", [":", тип], блок_функции;
```

### Комментарии
```ebnf
однострочный_комментарий = "#", {символ};
многострочный_комментарий = "\*", {символ}, "*\"
```